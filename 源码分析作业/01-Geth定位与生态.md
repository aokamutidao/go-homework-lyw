# 01 - Geth 在以太坊生态中的定位

> 返回: [[Go-Ethereum 核心功能与架构设计研究作业]]

## 1.1 什么是以太坊？

以太坊是一个**去中心化的智能合约平台**，它不仅支持数字货币（ETH），更重要的是支持**图灵完备的智能合约**。

```
┌─────────────────────────────────────────────────────────────────┐
│                        以太坊生态全景                             │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   应用层     │  │   协议层     │  │   网络层     │             │
│  │  DApp/DeFi   │  │  EVM/共识   │  │  P2P/DHT    │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              Go-Ethereum (Geth) 实现                     │   │
│  │     以太坊官方推荐的全节点实现，提供完整的区块链功能        │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

## 1.2 Geth 是什么？

**Go-Ethereum (Geth)** 是以太坊协议的**官方 Go 语言实现**，是目前使用最广泛的以太坊客户端。

### 核心特性

| 特性 | 说明 |
|------|------|
| **全节点** | 同步完整的区块链数据，参与网络验证 |
| **轻节点** | 通过 LES 协议，只同步区块头和状态快照 |
| **挖矿** | 支持 Ethash (PoW) 和信标链 (PoS) |
| **RPC API** | 提供 JSON-RPC 接口，支持 HTTP、WebSocket、IPC |
| **钱包** | 内置账户管理，支持 keystore 格式 |

### 代码仓库结构概览

```
geth/
├── accounts/          # 账户管理
├── common/            # 通用工具
├── consensus/         # 共识算法 (Ethash, Clique, Istanbul)
├── core/              # 核心区块处理
├── crypto/            # 加密算法
├── eth/               # 以太坊协议实现
├── ethdb/             # 数据库层
├── event/             # 事件系统
├── les/               # 轻节点协议
├── miner/             # 挖矿逻辑
├── p2p/               # P2P 网络层
├── params/            # 网络参数
├── rlp/               # RLP 编码
├── rpc/               # JSON-RPC
├── tests/             # 测试用例
├── trie/              # MPT 默克尔树
└── vm/                # EVM 虚拟机
```

## 1.3 Geth 在以太坊生态中的地位

### 客户端多样性

```
                    以太坊客户端生态
    ┌──────────────────────────────────────────────┐
    │                                              │
    │   Go       │  Rust   │  C++   │  JavaScript  │
    │  Geth     │  Parity │  Aleth  │  EthereumJS  │
    │           │  (停止)  │        │              │
    │   ★★★★★  │  ★★★    │  ★★    │   ★★★        │
    │   (官方)   │         │        │              │
    └──────────────────────────────────────────────┘

    Geth 份额约 70%+，是最主流的以太坊客户端
```

### 核心价值

1. **参考实现** - Geth 的实现被视为以太坊协议的"参考标准"
2. **安全审计** - 经过多年实战检验，代码安全性高
3. **功能完整** - 支持所有以太坊特性
4. **性能优化** - 持续的代码优化，性能优秀
5. **社区支持** - 活跃的开发者社区

## 1.4 以太坊版本演进

```
以太坊发展路线
├── Frontier (2015)       - 初始版本，命令行界面
├── Homestead (2016)      - 第一个稳定版本
├── Metropolis (2017-2019)- Byzentium + Constantinople
│   ├── EIP-649 难度炸弹延迟
│   └── EIP-1234 君士坦丁堡升级
├── Istanbul (2019-2020)  - 多个 EIP 升级
├── Berlin (2021)         - 费用优化
├── London (2021)         - EIP-1559 费用改革
├── Paris (2022)          - 合并 (The Merge)，转向 PoS
└── Shanghai (2023)       - 提款功能
```

## 1.5 Geth 的模块交互全景

```
                    Geth 核心模块交互
    ┌───────────────────────────────────────────────┐
    │              P2P 网络层 (p2p/)                │
    │         发现节点、建立连接、传播消息            │
    └──────────────┬────────────────────┬──────────┘
                   │                    │
                   ▼                    ▼
    ┌──────────────────────────┐  ┌──────────────────┐
    │    区块链协议层 (eth/)    │  │  轻节点协议 (les) │
    │  区块同步、状态同步、交易广播 │  │   轻量级同步    │
    └──────────┬───────────────┘  └──────────────────┘
               │
               ▼
    ┌──────────────────────────────────────────────┐
    │              核心层 (core/)                   │
    │  区块验证、状态转换、交易池管理、交易执行       │
    └─────────────────┬────────────────────────────┘
                      │
          ┌───────────┴───────────┐
          ▼                       ▼
┌─────────────────┐     ┌─────────────────────┐
│  EVM执行层 (vm/) │     │ 状态存储 (trie/)    │
│  智能合约执行    │     │  MPT 默克尔树       │
└─────────────────┘     └─────────────────────┘
```

## 1.6 学习建议

### 推荐学习路径

1. **第一阶段** - 理解架构
   - 阅读本文档
   - 查看 [[03-分层架构图]]

2. **第二阶段** - 深入模块
   - [[04-P2P网络层]] - 网络通信
   - [[05-区块链同步协议]] - 区块同步
   - [[06-MPT状态存储]] - 状态管理

3. **第三阶段** - 核心机制
   - [[07-EVM执行层]] - 合约执行
   - [[08-共识算法]] - 区块生成

4. **第四阶段** - 动手实践
   - [[09-实践验证指南]] - 编译运行

### 关键源码位置

| 功能 | 源码路径 |
|------|----------|
| 区块结构 | `core/types/block.go` |
| 区块链核心 | `core/blockchain.go` |
| P2P 协议 | `p2p/server.go` |
| 同步协议 | `eth/sync.go` |
| EVM | `core/vm/instructions.go` |
| MPT | `trie/trie.go` |

---

**下一步**: 继续阅读 [[02-核心模块交互]] 了解各模块之间的协作关系
